#!/bin/bash

# –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–∞—è –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ - –°–∫—Ä–∏–ø—Ç –ó–∞–ø—É—Å–∫–∞
# ==========================================

echo "üöÄ –ó–∞–ø—É—Å–∫ –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–æ–π –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã..."
echo ""

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd "/Users/ivan/Desktop/Marketing platform MAC/marketing_platform" || {
    echo "‚ùå –û—à–∏–±–∫–∞: –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
    exit 1
}

# –°–Ω—è—Ç–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å —Ñ–∞–π–ª–æ–≤ (macOS)
echo "üîì –°–Ω—è—Ç–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å —Ñ–∞–π–ª–æ–≤..."
xattr -cr . 2>/dev/null

# –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
echo "üßπ –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞..."
rm -f next-env.d.ts 2>/dev/null
rm -rf .next 2>/dev/null

# –ü—Ä–æ–≤–µ—Ä–∫–∞ node_modules
if [ ! -d "node_modules" ]; then
    echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
    npm install --cache /tmp/npm-cache
fi

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
echo ""
echo "‚úÖ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞..."
echo "üìç –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:3000"
echo ""
echo "–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C"
echo "=========================================="
echo ""

npm run dev
